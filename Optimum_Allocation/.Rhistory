## Spatial Settings for VAST
###############################
rm(list = ls())
library(VAST)
install.packages("devtools")
library("devtools")
install.packages('processx')
library("devtools")
install_github("james-thorson/VAST", INSTALL_opts="--no-staged-install")
install.packages('digest')
install.packages("digest")
install_github("james-thorson/VAST", INSTALL_opts="--no-staged-install")
library("devtools")
install_github("james-thorson/VAST", INSTALL_opts="--no-staged-install")
install_github("james-thorson/VAST", INSTALL_opts="--no-staged-install")
install_github("james-thorson/VAST", INSTALL_opts="--no-staged-install")
library(devtools)
install.packages('fs')
library(devtools)
install.packages("TMB")
install.packages("INLA", repos=c(getOption("repos"), INLA="https://inla.r-inla-download.org/R/stable"), dep=TRUE)
install.github("james-thorson/FishStatsUtils", INSTALL_opts="--no-staged-install")
library(devtools)
install.github("james-thorson/FishStatsUtils", INSTALL_opts="--no-staged-install")
install_github("james-thorson/FishStatsUtils", INSTALL_opts="--no-staged-install")
install.packages('glue')
install.packages("glue")
library(devtools)
install.github("james-thorson/FishStatsUtils", INSTALL_opts="--no-staged-install")
install_github("james-thorson/FishStatsUtils", INSTALL_opts="--no-staged-install")
install.packages('ps')
install.packages("ps")
library(devtools)
install_github("james-thorson/FishStatsUtils", INSTALL_opts="--no-staged-install")
install.packages("devtools") # if you have not installed "devtools" package
devtools::install_github("hoxo-m/githubinstall")
devtools::install_github("hoxo-m/githubinstall")
install.packages("githubinstall")
library(githubinstall)
githubinstall("FishStatsUtils")
install.packages(c("BH", "broom", "Cairo", "caTools", "coda", "crul", "daymetr", "dbplyr", "doParallel", "dplyr", "expm", "forcats", "geonames", "glmmTMB", "haven", "hoardr", "httpuv", "igraph", "imager", "isdparser", "later", "lme4", "mcmc", "MCMCpack", "modelr", "MODISTools", "mvtnorm", "ncdf4", "openair", "PBSmapping", "permute", "polynom", "purrr", "quantreg", "R6", "RandomFields", "RandomFieldsUtils", "raster", "Rcpp", "RcppEigen", "RCurl", "readr", "readxl", "reshape", "rgdal", "rgeos", "rgl", "rjags", "rlang", "rmarkdown", "rnoaa", "rstudioapi", "rvest", "shiny", "slam", "sn", "spam", "spData", "spdep", "stringi", "stringr", "testthat", "tibble", "tidyr", "tidyselect", "tinytex", "urltools", "vegan", "webshot", "xfun", "XML", "xtable", "zip", "zoo"))
library(TMB)
library(devtools)
install.packages('Matrix')
install.packages("Matrix")
install.packages("Matrix")
install.packages("Matrix")
install.packages("Matrix")
library(TMB)
install.packages('TMB', type = 'source')
install.packages("TMB", type = "source")
library(TMB)
library(INLA)
install.packages("INLA", repos=c(getOption("repos"), INLA="https://inla.r-inla-download.org/R/stable"), dep=TRUE)
install.github("james-thorson/FishStatsUtils", INSTALL_opts="--no-staged-install")
install_github("james-thorson/FishStatsUtils", INSTALL_opts="--no-staged-install")
library(devtools)
install.github("james-thorson/FishStatsUtils", INSTALL_opts="--no-staged-install")
install_github("james-thorson/FishStatsUtils", INSTALL_opts="--no-staged-install")
library(FishStatsUtils)
install_github("james-thorson/FishStatsUtils", INSTALL_opts="--no-staged-install")
version()
Version()
version
library(devtools)
install_github("james-thorson/FishStatsUtils", INSTALL_opts="--no-staged-install")
install_github("james-thorson/VAST", INSTALL_opts="--no-staged-install")
version
install.packages(c("BH", "bit", "broom", "callr", "caTools", "checkmate", "cli", "data.table", "deldir", "Deriv", "DiagrammeR", "dplyr", "DT", "fansi", "farver", "fields", "fmsb", "foreach", "foreign", "ggridges", "gh", "gstat", "hexbin", "Hmisc", "hms", "jsonlite", "knitr", "latticeExtra", "loo", "mapproj", "mime", "mixtools", "mnormt", "mvtnorm", "prettyunits", "processx", "quantreg", "RandomFields", "raster", "RCurl", "RJSONIO", "rlang", "rmarkdown", "rsconnect", "rstan", "rstudioapi", "segmented", "sf", "shinyjs", "slam", "sn", "spacetime", "spam", "SparseM", "spData", "StanHeaders", "stringi", "threejs", "tidyr", "tidyselect", "tinytex", "TMB", "vctrs", "visNetwork", "xfun", "XML", "xts", "yaml", "zoo"))
library(TMB)
library(devtools)
install.packages("INLA", repos=c(getOption("repos"), INLA="https://inla.r-inla-download.org/R/stable"), dep=TRUE)
install_github("james-thorson/FishStatsUtils", INSTALL_opts="--no-staged-install")
library(INLA
)
library(INLA)
library(INLA)
library(devtools)
install.packages('digest')
library(devtools)
install.packages("automap")
library(devtools)
devtools::install_local('C:/Users/Zack Oyafuso/Downloads/SamplingStrata-master/', upgrade = 'never', depen)
devtools::install_local('C:/Users/Zack Oyafuso/Downloads/SamplingStrata-master/', upgrade = 'never', dependencies = F)
?buildFrame
# devtools::install_local('C:/Users/Zack Oyafuso/Downloads/SamplingStrata-master/', upgrade = 'never', dependencies = F)
library(SamplingStrata)
?buildFrame
?buildFrameSpatial
?optimizeStrataSpatial
# devtools::install_local('C:/Users/Zack Oyafuso/Downloads/SamplingStrata-master/', upgrade = 'never', dependencies = F)
library(SamplingStrata)
#############################
# Example of "spatial" method
#############################
library(sp)
# library(devtools)
# devtools::install_local('C:/Users/Zack Oyafuso/Downloads/SamplingStrata-master/', upgrade = 'never', dependencies = F)
library(SamplingStrata)
library(sp)
data("meuse")
data("meuse.grid")
meuse.grid$id <- c(1:nrow(meuse.grid))
coordinates(meuse) <- c('x','y')
coordinates(meuse.grid) <- c('x','y')
library(gstat)
library(automap)
meuse.grid$id <- c(1:nrow(meuse.grid))
coordinates(meuse) <- c('x','y')
coordinates(meuse.grid) <- c('x','y')
v <- variogram(lead ~ dist + soil, data = meuse)
fit.vgm.lead <- autofitVariogram(lead ~ dist + soil,
meuse,
model = "Exp")
plot(v, fit.vgm.lead$var_model)
lead.kr <- krige(lead ~ dist + soil, meuse, meuse.grid,
model = fit.vgm.lead$var_model)
lead.pred <- ifelse(lead.kr[1]$var1.pred < 0,0, lead.kr[1]$var1.pred)
lead.var <- ifelse(lead.kr[2]$var1.var < 0, 0, lead.kr[2]$var1.var)
df <- as.data.frame(list(dom = rep(1,nrow(meuse.grid)),
lead.pred = lead.pred,
lead.var = lead.var,
lon = meuse.grid$x,
lat = meuse.grid$y,
id = c(1:nrow(meuse.grid))))
head(df)
str(df)
frame <-buildFrameSpatial(df = df,
id = "id",
X = c("lead.pred"),
Y = c("lead.pred"),
variance = c("lead.var"),
lon = "lon",
lat = "lat",
domainvalue = "dom")
cv <- as.data.frame(list(DOM = rep("DOM1",1),
CV1 = rep(0.05,1),
domainvalue = c(1:1) ))
str(frame)
meuse.grid$id <- c(1:nrow(meuse.grid))
coordinates(meuse)<-c("x","y")
coordinates(meuse.grid)<-c("x","y")
lm_lead <- lm(log(lead) ~ dist,data=meuse)
# summary(lm_lead)
lm_zinc <- lm(log(zinc) ~ dist,data=meuse)
# summary(lm_zinc)
kriging_lead = autoKrige(log(lead) ~ dist, meuse, meuse.grid)
kriging_lead = autoKrige(log(lead) ~ dist, meuse, meuse.grid)
kriging_zinc = autoKrige(log(zinc) ~ dist, meuse, meuse.grid)
df <- NULL
df$id <- meuse.grid$id
df$lead.pred <- kriging_lead$krige_output@data$var1.pred
df$lead.var <- kriging_lead$krige_output@data$var1.var
df$zinc.pred <- kriging_zinc$krige_output@data$var1.pred
df$zinc.var <- kriging_zinc$krige_output@data$var1.var
df$lon <- meuse.grid$x
df$lat <- meuse.grid$y
df$dom1 <- 1
df <- as.data.frame(df)
head(df)
library(SamplingStrata)
frame <- buildFrameSpatial(df=df,
id="id",
X=c("lead.pred","zinc.pred"),
Y=c("lead.pred","zinc.pred"),
variance=c("lead.var","zinc.var"),
lon="lon",
lat="lat",
domainvalue = "dom1")
cv <- as.data.frame(list(DOM=rep("DOM1",1),
CV1=rep(0.01,1),
CV2=rep(0.01,1),
domainvalue=c(1:1) ))
set.seed(1234)
solution <- optimStrata (
method = "spatial",
errors=cv,
framesamp=frame,
iter = 15,
pops = 10,
nStrata = 5,
fitting = c(summary(lm_lead)$r.square,summary(lm_zinc)$r.square),
range = c(kriging_lead$var_model$range[2],kriging_zinc$var_model$range[2]),
kappa=1,
writeFiles = FALSE,
showPlot = FALSE,
parallel = FALSE)
framenew <- solution$framenew
outstrata <- solution$aggr_strata
head(framenew)
str(framenew)
str(outstrata)
#Plot resuts
frameres <- SpatialPointsDataFrame(data=framenew, coords=cbind(framenew$LON,framenew$LAT) )
frameres2 <- SpatialPixelsDataFrame(points=frameres[c("LON","LAT")], data=framenew)
frameres2$LABEL <- as.factor(frameres2$LABEL)
spplot(frameres2,c("LABEL"), col.regions=bpy.colors(5))
#Select Sample
s <- selectSample(framenew,outstrata,writeFiles=FALSE)
s
optimStrata
library(SamplingStrata)
optimStrata
optimizeStrataSpatial
optimizeStrataSpatial
optimStrata
optimStrata
optimizeStrataSpatial
strataGenalgSpatial
buildStrataDFSpatial
buildStrataDFSpatial
library(SpatialStrata)
library(SamplingStrata)
optimStrata
optimizeStrataSpatial
strataGenalgSpatial
strataGenalgSpatial
library(SamplingStrata)
?rbgaSpatial
library(rnaturalearth)
devtools::install_github("ropensci/rnaturalearth")
traceback()
plot_maps(plot_set=plot_settings$plot_num[i],
Report=Report,
TmbData = TmbData,
Sdreport=Opt$SD,
PlotDF=MapDetails_List[["PlotDF"]],
MapSizeRatio=MapDetails_List[["MapSizeRatio"]],
working_dir = paste0(DateFile, plot_settings$var_name[i], '/' ),
Year_Set=Year_Set, Years2Include=Years2Include,
col = rev(heat.colors(100)),
mar=c(0,0,2,0), oma=c(3.5,3.5,0,0), cex=1.8,
category_names=levels(Data_Geostat[,'spp']))
library(VAST); library(mvtnorm)
install.packages("rnaturalearth")
library(rnaturalearth)
traceback(0)
traceback()
library(rastser)
library(raster)
library(rnaturalearth)
env <- asNamespace("rnaturalearth")
head(getNamespaceInfo(env, "S3methods"))
env <- asNamespace("rnaturalearth'0
env <- asNamespace("rnaturalearth')
env <- asNamespace("rnaturalearth")
update.packages(ask = FALSE, checkBuilt = TRUE)
update.packages(ask = FALSE, checkBuilt = TRUE)
remove.packages("rnaturalearth", lib="~/R/win-library/3.5")
install.packages('rnaturalearth')
library(rnaturalearth)
require(rnaturalearth)
devtools::install_github("ropenscilabs/rnaturalearthdata")
install.packages("rnaturalearthhires",
repos = "http://packages.ropensci.org",
type = "source")
library(rnaturalearthdata)
library(rnaturalearth)
library(rnaturalearth)
library(rnaturalearth)
library(rnaturalearth)
library(rnaturalearth)
library(TMBhelper)
library(raster); library(RColorBrewer); library(SamplingStrata)
setwd('C:/Users/Zack Oyafuso/Documents/GitHub/MS_OM_GoA/Optimum_Allocation/')
load('../Extrapolation_depths.RData')
VAST_model = '6d'
load(paste0('model_', VAST_model, '/optimization.RData'))
res_df = as.data.frame(res_df)
sample_sizes = sapply(strata_list, FUN = function(x) sum(x$Allocation))
winner = which.min(sample_sizes)
ns = 15
goa = SpatialPointsDataFrame(coords = Extrapolation_depths[,c('E_km', 'N_km')],
data = data.frame(
id = res_df$id,
domainvalue = res_df$domainvalue,
X1 = res_df[,-c(1:2)][,winner] ) )
# goa = SpatialPoints(coords = Extrapolation_depths[,c('E_km', 'N_km')] )
goa_ras = raster(goa, resolution = 5)
goa_ras =rasterize(x = goa, y = goa_ras, field = 'X1')
par(mar = c(0,0,0,0))
nstrata = nrow(strata_list[[winner]])
plot(goa_ras, legend = F, col = 'black')
idom = 1
idom = 1
sub_goa_ras = raster(goa, resolution = 5)
sub_goa_ras = rasterize(x = goa, y = goa_ras, field = 'X1')
sub_goa_ras = goa_ras
sub_goa_ras
# goa = SpatialPoints(coords = Extrapolation_depths[,c('E_km', 'N_km')] )
goa_ras = raster(goa, resolution = 5)
goa_ras =rasterize(x = goa, y = goa_ras, field = 'X1')
par(mar = c(0,0,0,0))
nstrata = nrow(strata_list[[winner]])
plot(goa_ras, legend = F, col = 'black')
idom = 1
sub_goa_ras = goa_ras
sub_goa_ras = raster(subset(goa, domainvalue == 1))
plot(sub_goa_ras, add = T, col = 'blue')
sub_goa_ras = raster(subset(goa, domainvalue == 1), resolution = 5)
sub_goa_ras =rasterize(x = subset(goa, domainvalue == 1), y = sub_goa_ras, field = 'X1')
sub_goa_ras
plot(sub_goa_ras, add = T, col = 'blue')
nstrata = length(unique(subset(goa, domainvalue == 1)$X1))
nstrata
ncolors = brewer.pal(n = nstrata, name = 'Spectral')
brewer.pal(n = nstrata, name = 'Spectral')[subset(goa, domainvalue == 1)$X1]
ncolors = brewer.pal(n = nstrata, name = 'Spectral')[subset(goa, domainvalue == 1)$X1]
plot(sub_goa_ras, add = T, col = ncolors)
sub_goa_ras
ncolors = brewer.pal(n = nstrata, name = 'Spectral')
plot(sub_goa_ras, add = T, col = ncolors)
plot(goa_ras, legend = F, col = 'black')
idom = 1
sub_goa_ras = raster(subset(goa, domainvalue == 1), resolution = 5)
sub_goa_ras =rasterize(x = subset(goa, domainvalue == 1), y = sub_goa_ras, field = 'X1')
nstrata = length(unique(subset(goa, domainvalue == 1)$X1))
ncolors = brewer.pal(n = nstrata, name = 'Spectral')
plot(sub_goa_ras, add = T, col = ncolors)
plot(goa_ras, legend = F, col = 'white')
idom = 1
sub_goa_ras = raster(subset(goa, domainvalue == 1), resolution = 5)
sub_goa_ras =rasterize(x = subset(goa, domainvalue == 1), y = sub_goa_ras, field = 'X1')
nstrata = length(unique(subset(goa, domainvalue == 1)$X1))
ncolors = brewer.pal(n = nstrata, name = 'Spectral')
plot(sub_goa_ras, add = T, col = ncolors)
sum(strata_list[[winner]]$Allocation)
ndom
for(idom in 1:5){
sub_goa_ras = raster(subset(goa, domainvalue == idom), resolution = 5)
sub_goa_ras =rasterize(x = subset(goa, domainvalue == idom), y = sub_goa_ras, field = 'X1')
nstrata = length(unique(subset(goa, domainvalue == idom)$X1))
ncolors = brewer.pal(n = nstrata, name = 'Spectral')
plot(sub_goa_ras, add = T, col = ncolors)
}
strata_list[[winner]]
plot(sub_goa_ras, add = F, col = ncolors, legend = F)
idom
sub_goa_ras = raster(subset(goa, domainvalue == idom), resolution = 5)
sub_goa_ras =rasterize(x = subset(goa, domainvalue == idom), y = sub_goa_ras, field = 'X1')
unique(subset(goa, domainvalue == idom)$X1)
sub_goa = subset(goa, domainvalue == idom)
str(sub_goa)
str(sub_goa@data)
unique(sub_goa@data$X1)
goa = SpatialPointsDataFrame(coords = Extrapolation_depths[,c('E_km', 'N_km')],
data = data.frame(
id = res_df$id,
domainvalue = res_df$domainvalue,
X1 = res_df[,-c(1:2)][,winner] ) )
table(goa@data[,c('domainvalue', 'X1')])
str(res_df[,-c(1:2)])
head(res_df)
str(res_df)
str(res_df[,-c(1:2)])
str(res_df[,])
str(res_df[,-1])
str(res_df[,-1])length(strata_list)
length(strata_list)
winner
goa = SpatialPointsDataFrame(coords = Extrapolation_depths[,c('E_km', 'N_km')],
data = data.frame(
id = res_df$id,
domainvalue = res_df$domainvalue,
X1 = res_df[,paste0('V',winner)] ) )
head(goa)
table(goa$domainvalue, goa$X1)
library(raster); library(RColorBrewer); library(SamplingStrata)
setwd('C:/Users/Zack Oyafuso/Documents/GitHub/MS_OM_GoA/Optimum_Allocation/')
load('../Extrapolation_depths.RData')
VAST_model = '6d'
load(paste0('model_', VAST_model, '/optimization.RData'))
res_df = as.data.frame(res_df)
sample_sizes = sapply(strata_list, FUN = function(x) sum(x$Allocation))
winner = which.min(sample_sizes)
ns = 15
goa = SpatialPointsDataFrame(coords = Extrapolation_depths[,c('E_km', 'N_km')],
data = data.frame(
id = res_df$id,
domainvalue = res_df$domainvalue,
X1 = res_df[,paste0('V',winner)] ) )
# goa = SpatialPoints(coords = Extrapolation_depths[,c('E_km', 'N_km')] )
goa_ras = raster(goa, resolution = 5)
goa_ras =rasterize(x = goa, y = goa_ras, field = 'X1')
par(mar = c(0,0,0,0))
nstrata = nrow(strata_list[[winner]])
plot(goa_ras, legend = F, col = 'white')
head(goa)
table(goa$domainvalue, goa$X1)
library(raster); library(RColorBrewer); library(SamplingStrata)
setwd('C:/Users/Zack Oyafuso/Documents/GitHub/MS_OM_GoA/Optimum_Allocation/')
load('../Extrapolation_depths.RData')
VAST_model = '6d'
load(paste0('model_', VAST_model, '/optimization.RData'))
res_df = as.data.frame(res_df)
sample_sizes = sapply(strata_list, FUN = function(x) sum(x$Allocation))
winner = which.min(sample_sizes)
winner
winner = which.max(sample_sizes)
ns = 15
goa = SpatialPointsDataFrame(coords = Extrapolation_depths[,c('E_km', 'N_km')],
data = data.frame(
id = res_df$id,
domainvalue = res_df$domainvalue,
X1 = res_df[,paste0('V',winner)] ) )
goa = SpatialPointsDataFrame(coords = Extrapolation_depths[,c('E_km', 'N_km')],
data = data.frame(
id = res_df$id,
domainvalue = res_df$domainvalue,
X1 = res_df[,paste0('V','3')] ) )
# goa = SpatialPoints(coords = Extrapolation_depths[,c('E_km', 'N_km')] )
goa_ras = raster(goa, resolution = 5)
goa_ras =rasterize(x = goa, y = goa_ras, field = 'X1')
par(mar = c(0,0,0,0))
nstrata = nrow(strata_list[[winner]])
plot(goa_ras, legend = F, col = 'white')
idom = 1
sub_goa = subset(goa, domainvalue == idom)
sub_goa_ras = raster(sub_goa, resolution = 5)
sub_goa_ras =rasterize(x = subset(goa, domainvalue == idom), y = sub_goa_ras, field = 'X1')
nstrata = length(unique(subset(goa, domainvalue == idom)$X1))
ncolors = brewer.pal(n = nstrata, name = 'Spectral')
plot(sub_goa_ras, add = T, col = ncolors, legend = F)
for(idom in 1:5){
sub_goa = subset(goa, domainvalue == idom)
sub_goa_ras = raster(sub_goa, resolution = 5)
sub_goa_ras =rasterize(x = subset(goa, domainvalue == idom), y = sub_goa_ras, field = 'X1')
nstrata = length(unique(subset(goa, domainvalue == idom)$X1))
ncolors = brewer.pal(n = nstrata, name = 'Spectral')
plot(sub_goa_ras, add = T, col = ncolors, legend = F)
}
nstrata
plot(goa_ras, legend = F, col = 'white')
for(idom in 1:5){
sub_goa = subset(goa, domainvalue == idom)
sub_goa_ras = raster(sub_goa, resolution = 5)
sub_goa_ras =rasterize(x = subset(goa, domainvalue == idom), y = sub_goa_ras, field = 'X1')
nstrata = length(unique(subset(goa, domainvalue == idom)$X1))
ncolors = brewer.pal(n = nstrata, name = 'Spectral')
plot(sub_goa_ras, add = T, col = ncolors, legend = F)
}
image(goa_ras, legend = F, col = 'white')
sub_goa = subset(goa, domainvalue == idom)
sub_goa_ras = raster(sub_goa, resolution = 5)
sub_goa_ras = rasterize(x = subset(goa, domainvalue == idom), y = sub_goa_ras, field = 'X1')
nstrata = length(unique(subset(goa, domainvalue == idom)$X1))
ncolors = brewer.pal(n = nstrata, name = 'Spectral')
plot(sub_goa_ras, add = T, col = ncolors, legend = F)
for(idom in 1:5){
sub_goa = subset(goa, domainvalue == idom)
sub_goa_ras = raster(sub_goa, resolution = 5)
sub_goa_ras = rasterize(x = subset(goa, domainvalue == idom), y = sub_goa_ras, field = 'X1')
nstrata = length(unique(subset(goa, domainvalue == idom)$X1))
ncolors = brewer.pal(n = nstrata, name = 'Spectral')
plot(sub_goa_ras, add = T, col = ncolors, legend = F)
}
image(goa_ras, legend = F, col = 'white')
for(idom in 1:5){
sub_goa = subset(goa, domainvalue == idom)
sub_goa_ras = raster(sub_goa, resolution = 5)
sub_goa_ras = rasterize(x = subset(goa, domainvalue == idom), y = sub_goa_ras, field = 'X1')
nstrata = length(unique(subset(goa, domainvalue == idom)$X1))
ncolors = brewer.pal(n = nstrata, name = 'Spectral')
plot(sub_goa_ras, add = T, col = ncolors, legend = F)
}
image(goa_ras, legend = F, col = 'white', asp = 1)
image(goa_ras, col = 'white', asp = 1)
warnings()
for(idom in 1:5){
sub_goa = subset(goa, domainvalue == idom)
sub_goa_ras = raster(sub_goa, resolution = 5)
sub_goa_ras = rasterize(x = subset(goa, domainvalue == idom), y = sub_goa_ras, field = 'X1')
nstrata = length(unique(subset(goa, domainvalue == idom)$X1))
ncolors = brewer.pal(n = nstrata, name = 'Spectral')
plot(sub_goa_ras, add = T, col = ncolors, legend = F)
}
image(goa_ras, col = 'white', asp = 1)
for(idom in 1:5){
sub_goa = subset(goa, domainvalue == idom)
sub_goa_ras = raster(sub_goa, resolution = 5)
sub_goa_ras = rasterize(x = subset(goa, domainvalue == idom), y = sub_goa_ras, field = 'X1')
nstrata = length(unique(subset(goa, domainvalue == idom)$X1))
ncolors = brewer.pal(n = nstrata, name = 'Spectral')
plot(sub_goa_ras, add = T, col = ncolors, legend = F)
}
sum(strata_list[[winner]]$Allocation)
image(goa_ras, col = 'white', asp = 1, axes = F, ann = F)
for(idom in 1:5){
sub_goa = subset(goa, domainvalue == idom)
sub_goa_ras = raster(sub_goa, resolution = 5)
sub_goa_ras = rasterize(x = subset(goa, domainvalue == idom), y = sub_goa_ras, field = 'X1')
nstrata = length(unique(subset(goa, domainvalue == idom)$X1))
ncolors = brewer.pal(n = nstrata, name = 'Spectral')
plot(sub_goa_ras, add = T, col = ncolors, legend = F)
}
par(mar = c(0,0,0,0))
nstrata = nrow(strata_list[[winner]])
image(goa_ras, col = 'white', asp = 1, axes = F, ann = F)
for(idom in 1:5){
sub_goa = subset(goa, domainvalue == idom)
sub_goa_ras = raster(sub_goa, resolution = 5)
sub_goa_ras = rasterize(x = subset(goa, domainvalue == idom), y = sub_goa_ras, field = 'X1')
nstrata = length(unique(subset(goa, domainvalue == idom)$X1))
ncolors = brewer.pal(n = nstrata, name = 'Spectral')
plot(sub_goa_ras, add = T, col = ncolors, legend = F)
}
sum(strata_list[[winner]]$Allocation)
load('C:/Users/Zack Oyafuso/Documents/GitHub/MS_OM_GoA/Extrapolation_depths.RData')
goa = SpatialPointsDataFrame(coords = Extrapolation_depths[,c('E_km', 'N_km')],
data = cbind(solution$framenew[,paste0('Y',1:ns)],
X1 = solution$framenew$STRATO,
domain = df$Domain) )
